name: projectName
repositoryId: 84
repositoryEvent:
  - name: bitbucket
    pathToEvent: eventKey
    events:
      - event: pr:comment:added
        rules:
          - action: AddLaunchLinkInPR
            conditions:
              - jsonPath: comment.text
                value: "!run_e2e_tests"
              - jsonPath: pullRequest.open
                value: true
            enrichAction: RunE2E
      - event: pr:opened
        rules:
          - action: AddInstructionMsg
            conditions:
              - jsonPath: pullRequest.open
                value: true

  - name: teamcity
    pathToEvent: build.notifyType
    events:
      - event: buildFinished
        rules:
          - action: SendE2EResultToStash
            conditions:
              - jsonPath: build.buildResultPrevious
                value: success

reviewers:
  - Evgeniy.Shevtsov
